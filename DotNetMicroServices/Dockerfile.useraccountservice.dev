FROM mcr.microsoft.com/dotnet/sdk:10.0
WORKDIR /app

# Install curl for health checks
RUN apt-get update && apt-get install -y curl && rm -rf /var/lib/apt/lists/*

# Copy project files for restore
COPY ["libs/Shared/Shared.csproj", "libs/Shared/"]
COPY ["src/UserAccountService/UserAccountService.csproj", "src/UserAccountService/"]

# Restore dependencies
WORKDIR /app/src/UserAccountService
RUN dotnet restore

# Expose port
EXPOSE 5003

# Run with watch (source code will be mounted as volume)
CMD ["dotnet", "watch", "run", "--urls", "http://+:5003"]

