# Understanding `accessMode = Schema.AccessMode.READ_ONLY`

## What Does READ_ONLY Mean?

`accessMode = Schema.AccessMode.READ_ONLY` is a **Swagger/OpenAPI documentation annotation** that tells API documentation tools (like Swagger UI) how a field should be treated:

- ‚úÖ **Appears in API responses** (GET requests) - Users can see and use this field
- ‚ùå **NOT shown in request body examples** (POST/PUT requests) - Users should NOT send this field
- üîí **Server-generated** - The server automatically creates/manages this field

## Why Use READ_ONLY?

Fields that are `READ_ONLY` are typically:

1. **Auto-generated by the server** (like IDs, timestamps)
2. **Not user-provided** (users shouldn't send them)
3. **Returned in responses** (so clients can use them for future requests)

## Real-World Example

### Java Spring Boot

```java
@Schema(
    description = "Unique identifier of the course",
    example = "507f1f77bcf86cd799439011",
    accessMode = Schema.AccessMode.READ_ONLY  // <-- This!
)
private String id;
```

### What This Means in Swagger UI:

#### ‚úÖ In GET Response (Shown):

```json
{
  "id": "507f1f77bcf86cd799439011", // ‚úÖ Visible in response
  "name": "Spring Boot Fundamentals",
  "description": "Learn Spring Boot",
  "createdAt": "2025-11-06T12:00:00",
  "updatedAt": "2025-11-06T12:00:00"
}
```

#### ‚ùå In POST Request Body (NOT Shown):

```json
{
  // "id" is NOT shown here - users shouldn't send it!
  "name": "Spring Boot Fundamentals", // ‚úÖ User provides this
  "description": "Learn Spring Boot" // ‚úÖ User provides this
  // "createdAt" and "updatedAt" are also NOT shown (they're READ_ONLY)
}
```

## Access Mode Options

### 1. `READ_ONLY` (Most Common)

- Field appears in responses but NOT in request bodies
- Used for: IDs, timestamps, computed fields

```java
@Schema(accessMode = Schema.AccessMode.READ_ONLY)
private String id;
```

### 2. `READ_WRITE` (Default)

- Field appears in both requests AND responses
- Used for: User-provided data (name, description, etc.)

```java
@Schema(accessMode = Schema.AccessMode.READ_WRITE)  // Default, can be omitted
private String name;
```

### 3. `WRITE_ONLY`

- Field appears in request bodies but NOT in responses
- Used for: Passwords, sensitive data you don't want to return

```java
@Schema(accessMode = Schema.AccessMode.WRITE_ONLY)
private String password;  // User sends it, but we don't return it
```

## Node.js/NestJS Equivalents

### NestJS with Swagger

```typescript
import { ApiProperty } from "@nestjs/swagger";

export class Course {
  @ApiProperty({
    description: "Unique identifier of the course",
    example: "507f1f77bcf86cd799439011",
    readOnly: true, // <-- Equivalent to READ_ONLY
  })
  id?: string;

  @ApiProperty({
    description: "Name of the course",
    example: "Spring Boot Fundamentals",
    // readOnly: false (default) - appears in both request and response
  })
  name: string;

  @ApiProperty({
    description: "User password",
    writeOnly: true, // <-- Equivalent to WRITE_ONLY
  })
  password?: string;
}
```

### Plain Node.js with Swagger JSDoc

```javascript
/**
 * @swagger
 * components:
 *   schemas:
 *     Course:
 *       type: object
 *       properties:
 *         id:
 *           type: string
 *           description: Unique identifier
 *           readOnly: true  // <-- Equivalent
 *         name:
 *           type: string
 *           description: Course name
 *           // readOnly: false (default)
 *         password:
 *           type: string
 *           writeOnly: true  // <-- Equivalent to WRITE_ONLY
 */
```

## Complete Example: Course Model

### Java (Spring Boot)

```java
@Document(collection = "courses")
public class Course {

    @Id
    @Schema(
        description = "Unique identifier",
        accessMode = Schema.AccessMode.READ_ONLY  // ‚úÖ Server-generated
    )
    private String id;

    @Schema(
        description = "Course name",
        // READ_WRITE (default) - user provides this
    )
    private String name;

    @Schema(
        description = "Created timestamp",
        accessMode = Schema.AccessMode.READ_ONLY  // ‚úÖ Server-generated
    )
    private LocalDateTime createdAt;
}
```

### NestJS Equivalent

```typescript
@Schema({ collection: "courses" })
export class Course extends Document {
  @ApiProperty({
    description: "Unique identifier",
    readOnly: true, // ‚úÖ Server-generated
  })
  id?: string;

  @ApiProperty({
    description: "Course name",
    // readOnly: false (default) - user provides this
  })
  name: string;

  @ApiProperty({
    description: "Created timestamp",
    readOnly: true, // ‚úÖ Server-generated
  })
  createdAt?: Date;
}
```

## How It Works in Practice

### Creating a Course (POST)

**Request Body (what user sends):**

```json
{
  "name": "Spring Boot Fundamentals",
  "description": "Learn Spring Boot from scratch"
  // Note: NO "id", "createdAt", or "updatedAt" fields
}
```

**Response (what server returns):**

```json
{
  "id": "507f1f77bcf86cd799439011", // ‚úÖ Server generated
  "name": "Spring Boot Fundamentals",
  "description": "Learn Spring Boot from scratch",
  "createdAt": "2025-11-06T12:00:00", // ‚úÖ Server generated
  "updatedAt": "2025-11-06T12:00:00" // ‚úÖ Server generated
}
```

### Getting a Course (GET)

**Response:**

```json
{
  "id": "507f1f77bcf86cd799439011", // ‚úÖ Included in response
  "name": "Spring Boot Fundamentals",
  "description": "Learn Spring Boot from scratch",
  "createdAt": "2025-11-06T12:00:00", // ‚úÖ Included in response
  "updatedAt": "2025-11-06T12:00:00" // ‚úÖ Included in response
}
```

## Summary Table

| Access Mode            | In Request Body? | In Response? | Use Case                         |
| ---------------------- | ---------------- | ------------ | -------------------------------- |
| `READ_ONLY`            | ‚ùå No            | ‚úÖ Yes       | IDs, timestamps, computed fields |
| `READ_WRITE` (default) | ‚úÖ Yes           | ‚úÖ Yes       | User-provided data               |
| `WRITE_ONLY`           | ‚úÖ Yes           | ‚ùå No        | Passwords, sensitive data        |

## Key Takeaways

1. **`READ_ONLY`** = "Server manages this, don't send it, but you'll get it back"
2. **Most common use**: IDs and timestamps (`id`, `createdAt`, `updatedAt`)
3. **Purpose**: Prevents users from trying to set fields they shouldn't control
4. **Documentation**: Makes Swagger UI show correct request/response examples
5. **Security**: Helps prevent users from trying to manipulate server-generated fields

## Common READ_ONLY Fields

- `id` / `_id` - Database-generated unique identifier
- `createdAt` - Timestamp when record was created
- `updatedAt` - Timestamp when record was last updated
- `version` - Optimistic locking version number
- `createdBy` - User who created the record (set by server from auth token)
- Computed fields - Fields calculated from other data





